import{a as z}from"./chunk-UQIJAAKI.js";import{a as W,c as j,i as k,j as q,l as R,m as A,o as D,q as F,s as L,t as B,x as G}from"./chunk-N5GVGQ4K.js";import"./chunk-J6TDGA35.js";import"./chunk-QUJFQN2Y.js";import"./chunk-7SZ5I7WP.js";import"./chunk-ACCAO4MD.js";import"./chunk-5JK572SR.js";import"./chunk-Q6ZAM2NN.js";import"./chunk-D4FXQO5S.js";import"./chunk-DQ5ZCVVT.js";import"./chunk-IACAUHTZ.js";import"./chunk-3PBEGTIV.js";import"./chunk-7IJ7AO6C.js";import"./chunk-MTHZ7MWU.js";import"./chunk-WI5MSH4N.js";import"./chunk-KIHU62J2.js";import"./chunk-CKP3SGE2.js";import"./chunk-QWR7HY4T.js";import{b as Y}from"./chunk-JAJGNRWB.js";import{Aa as V,B as g,F as h,P as m,Q as i,R as t,S as v,Z as f,ha as r,ja as y,ka as S,la as _,ma as I,mb as O,nb as P,pb as T,rb as w,sb as C,ta as b,va as E,xb as x,y as l,ya as M,yb as N,z as d,zb as H}from"./chunk-LTL7P2HV.js";import"./chunk-EULJA4UZ.js";import"./chunk-G4GOZ2R2.js";import"./chunk-G3OIN57Y.js";import"./chunk-6YG4V6SN.js";import"./chunk-AH6ETBBK.js";import"./chunk-FKHQKLCL.js";import"./chunk-EGVB773T.js";import"./chunk-M2X7KQLB.js";import"./chunk-LRFGNCHE.js";import"./chunk-C5RQ2IC2.js";import"./chunk-42C7ZIID.js";import{j as c}from"./chunk-VI73JOY6.js";function J(a,o){a&1&&v(0,"ion-spinner")}function K(a,o){a&1&&(i(0,"span"),r(1,"Verify"),t())}var re=(()=>{let o=class o{constructor(n,s,e,p){this.authService=n,this.router=s,this.route=e,this.errorHandler=p,this.mode="signup",this.email="",this.otp="",this.loading=!1}ionViewWillEnter(){return c(this,null,function*(){this.email=this.route.snapshot.queryParamMap.get("email")||"",this.mode=this.route.snapshot.queryParamMap.get("mode")||"signup"})}verifyOtp(){return c(this,null,function*(){if(this.loading=!0,this.otp){let{error:n}=yield this.authService.verifyOtp(this.email,this.otp);n?this.errorHandler.handleError(n):this.mode==="reset-password"?this.router.navigate(["/auth/reset-password"]):this.router.navigate(["/home"])}this.loading=!1})}resendOtp(){return c(this,null,function*(){this.loading=!0;let{error:n}=yield this.authService.sendOtp(this.email);this.loading=!1,n&&this.errorHandler.handleError(n)})}};o.\u0275fac=function(s){return new(s||o)(d(Y),d(V),d(M),d(z))},o.\u0275cmp=g({type:o,selectors:[["app-otp-verification"]],decls:23,vars:6,consts:[[1,"ion-padding"],[1,"container"],[3,"ngSubmit"],["position","floating"],["type","text","name","otp","inputmode","numeric","maxlength","6","autocomplete","one-time-code","required","",3,"ngModelChange","ngModel"],["type","submit","expand","block","color","primary",3,"disabled"],[4,"ngIf"],[1,"resend-container"],["fill","clear",3,"click","disabled"]],template:function(s,e){s&1&&(i(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),r(3,"Verify Email"),t()()(),i(4,"ion-content",0)(5,"div",1)(6,"h1"),r(7,"Verify Your Email"),t(),i(8,"p"),r(9),t(),i(10,"form",2),f("ngSubmit",function(){return e.verifyOtp()}),i(11,"ion-item")(12,"ion-label",3),r(13,"Verification Code"),t(),i(14,"ion-input",4),I("ngModelChange",function(u){return _(e.otp,u)||(e.otp=u),u}),t()(),i(15,"ion-button",5),h(16,J,1,0,"ion-spinner",6)(17,K,2,0,"span",6),t()(),i(18,"div",7)(19,"p"),r(20,"Didn't receive the code?"),t(),i(21,"ion-button",8),f("click",function(){return e.resendOtp()}),r(22," Resend OTP "),t()()()()),s&2&&(l(9),y("We've sent a OTP code to ",e.email,". Please enter it below."),l(5),S("ngModel",e.otp),l(),m("disabled",e.loading),l(),m("ngIf",e.loading),l(),m("ngIf",!e.loading),l(4),m("disabled",e.loading))},dependencies:[E,b,G,j,k,q,R,A,D,F,L,B,W,H,C,O,P,x,N,w,T],encapsulation:2});let a=o;return a})();export{re as OtpVerificationPage};
